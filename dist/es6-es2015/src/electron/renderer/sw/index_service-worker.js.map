{"version":3,"file":"index_service-worker.js","sourceRoot":"","sources":["../../../../../../src/electron/renderer/sw/index_service-worker.ts"],"names":[],"mappings":";;;AAEA,sCAA6C,kBAA0B;IAEnE,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAgB,CAAC;IAClE,QAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACxC,QAAQ,CAAC,YAAY,CAAC,gBAAgB,EAClC,2DAA2D;QAC3D,kEAAkE,CAAC,CAAC;IACxE,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,gCAAgC,CAAC,CAAC;IACnE,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;IAC9D,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QACf,YAAY,CAAC,WAAW,CAAC,QAAgB,CAAC,CAAC;IAC/C,CAAC;IAOD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,GAAG,EAAE;QAEvC,QAAgB,CAAC,YAAY,EAAE,CAAC;QAGjC,UAAU,CAAC,GAAS,EAAE;QAEtB,CAAC,CAAA,EAAE,IAAI,CAAC,CAAC;IACb,CAAC,CAAC,CAAC;IAGH,MAAM,SAAS,GAAG,kBAAkB,GAAG,MAAM,CAAC;IAC9C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IACvB,QAAQ,CAAC,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC5C,CAAC;AAhCD,oEAgCC","sourcesContent":["// import { startNavigatorExperiment } from \"../index_navigator\";\r\n\r\nexport function startServiceWorkerExperiment(publicationJsonUrl: string) {\r\n\r\n    const webview2 = document.createElement(\"webview\") as HTMLElement;\r\n    webview2.setAttribute(\"id\", \"webview2\");\r\n    webview2.setAttribute(\"webpreferences\",\r\n        \"nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, \" +\r\n        \"contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0\");\r\n    webview2.setAttribute(\"preload\", \"./sw/preload_service-worker.js\");\r\n    const readerChrome = document.getElementById(\"reader_chrome\");\r\n    if (readerChrome) {\r\n        readerChrome.appendChild(webview2 as Node);\r\n    }\r\n    // webview2.addEventListener('did-start-loading', () => {\r\n    // });\r\n    // webview2.addEventListener('did-stop-loading', () => {\r\n    // });\r\n    // webview2.addEventListener('did-finish-load', () => {\r\n    // });\r\n    webview2.addEventListener(\"dom-ready\", () => {\r\n\r\n        (webview2 as any).openDevTools();\r\n        // const wc = webview2.getWebContents();\r\n\r\n        setTimeout(async () => {\r\n            // startNavigatorExperiment(publicationJsonUrl);\r\n        }, 2000);\r\n    });\r\n    // const swBootUrl = publicationJsonUrl + \"/show/metadata\";\r\n    // const swBootUrl = publicationJsonUrl;\r\n    const swBootUrl = publicationJsonUrl + \"/../\";\r\n    console.log(swBootUrl);\r\n    webview2.setAttribute(\"src\", swBootUrl);\r\n}\r\n"]}