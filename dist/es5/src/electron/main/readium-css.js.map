{"version":3,"file":"readium-css.js","sourceRoot":"","sources":["../../../../../src/electron/main/readium-css.ts"],"names":[],"mappings":";;AAQA,iCAAmC;AAEnC,SAAgB,eAAe,CAAC,MAAc,EAAE,UAAkB;IAE9D,IAAM,aAAa,GAAG;QAClB,QAAQ,EAAE,QAAQ;QAClB,IAAI,EAAE,IAAI;QACV,WAAW,EAAE,KAAK;QAClB,SAAS,EAAE,IAAI;QACf,KAAK,EAAE,KAAK;QACZ,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,KAAK;QAEf,UAAU,EAAE,UAAC,GAAqB,EAAE,KAAa,EAAE,KAAU;YAEzD,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAChC,CAAC;KACJ,CAAC;IAIF,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC,CAAC;AACjF,CAAC;AApBD,0CAoBC","sourcesContent":["// ==LICENSE-BEGIN==\n// Copyright 2017 European Digital Reading Lab. All rights reserved.\n// Licensed to the Readium Foundation under one or more contributor license agreements.\n// Use of this source code is governed by a BSD-style license\n// that can be found in the LICENSE file exposed on Github (readium) in the project repository.\n// ==LICENSE-END==\n\nimport { Server } from \"@r2-streamer-js/http/server\";\nimport * as express from \"express\";\n\nexport function setupReadiumCSS(server: Server, folderPath: string) {\n    // https://expressjs.com/en/4x/api.html#express.static\n    const staticOptions = {\n        dotfiles: \"ignore\",\n        etag: true,\n        fallthrough: false,\n        immutable: true,\n        index: false,\n        maxAge: \"1d\",\n        redirect: false,\n        // extensions: [\"css\", \"otf\"],\n        setHeaders: (res: express.Response, _path: string, _stat: any) => {\n            //   res.set('x-timestamp', Date.now())\n            server.setResponseCORS(res);\n        },\n    };\n\n    // TODO: extract the const string \"readium-css\"\n    // (also used in electron/renderer/webview/readium-css.ts)\n    server.expressUse(\"/readium-css\", express.static(folderPath, staticOptions));\n}\n"]}