{"version":3,"file":"preload_service-worker.js","sourceRoot":"","sources":["../../../../../../src/electron/renderer/sw/preload_service-worker.ts"],"names":[],"mappings":";AAAA,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;AAUtC,OAAO,CAAC,GAAG,CAAG,MAAc,CAAC,SAAuB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAE/E,MAAM,SAAS,GAAK,MAAc,CAAC,MAAiB,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClF,MAAM,KAAK,GAAG,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC3C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAGnB,MAAM,KAAK,GAAK,MAAc,CAAC,MAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC5E,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAEjB,MAAc,CAAC,SAAuB,CAAC,aAAa,CAAC,QAAQ,CAC3D,KAAK,EAAE;IACP,KAAK;CACR,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;IACd,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;IACrC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACnB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAC9B,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC3B,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAE9B,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;IACb,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;IACvC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACrB,CAAC,CAAC,CAAC;AAED,MAAc,CAAC,SAAuB,CAAC,aAAa,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAC7F,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAEpC,CAAC,CAAC,CAAC","sourcesContent":["console.log(\"PRELOAD SERVICE WORKER\");\r\n\r\n// console.log(process.env);\r\n\r\n// console.log(global);\r\n// console.log(global.window);\r\n// console.log(global.navigator);\r\n\r\n// console.log(global.window.location);\r\n\r\nconsole.log(((global as any).navigator as Navigator).serviceWorker.controller);\r\n\r\nconst pathItems = ((global as any).window as Window).location.pathname.split(\"/\");\r\nconst scope = \"/pub/\" + pathItems[2] + \"/\";\r\nconsole.log(scope);\r\n\r\n// routed by HTTP server to ./service-worker.js\r\nconst swURL = ((global as any).window as Window).location.origin + \"/sw.js\";\r\nconsole.log(swURL);\r\n\r\n((global as any).navigator as Navigator).serviceWorker.register(\r\n    swURL, {\r\n    scope,\r\n}).then((swReg) => {\r\n    console.log(\"service-worker.js REG\");\r\n    console.log(swReg);\r\n    console.log(swReg.installing);\r\n    console.log(swReg.waiting);\r\n    console.log(swReg.active);\r\n\r\n}).catch((err) => {\r\n    console.log(\"service-worker.js ERROR\");\r\n    console.log(err);\r\n});\r\n\r\n((global as any).navigator as Navigator).serviceWorker.addEventListener(\"controllerchange\", () => {\r\n    console.log(\"controllerchange\");\r\n    // ((global as any).window as Window).location.reload();\r\n});\r\n"]}